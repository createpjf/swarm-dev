# config/agents.yaml

llm:
  provider: flock
memory:
  backend: hybrid
  long_term: true
  episodic:
    enabled: true
    recall_budget_tokens: 1500
  knowledge_base:
    enabled: true
    recall_budget_tokens: 800
chain:
  enabled: true
  network: base-sepolia
  rpc_url_env: BASE_RPC_URL
  operator_key_env: CHAIN_PRIVATE_KEY
  lit:
    network: naga-dev
  erc8004:
    identity_registry_env: ERC8004_IDENTITY_REGISTRY
    reputation_registry_env: ERC8004_REPUTATION_REGISTRY
  safe:
    address_env: GNOSIS_SAFE_ADDRESS
  x402:
    enabled: false
    facilitator_url: https://x402.coinbase.com
    max_payment_usd: '0.10'
  reputation_sync:
    enabled: true
    min_score_delta: 5.0
    max_writes_per_hour: 10
reputation:
  peer_review_agents:
  - reviewer
  evolution:
    prompt_auto_apply: true
    model_swap_require_confirm: true
    role_vote_threshold: 0.6
max_idle_cycles: 30
resilience:
  max_retries: 3
  base_delay: 1.0
  max_delay: 30.0
  jitter: 0.5
  circuit_breaker_threshold: 3
  circuit_breaker_cooldown: 120
compaction:
  enabled: true
  max_context_tokens: 10000
  summary_target_tokens: 1500
  keep_recent_turns: 4
agents:
- id: planner
  role: 'Strategic planner. Decompose the task into clear subtasks.

    Write one subtask per line, prefixed with TASK:.

    For each task, add COMPLEXITY: simple|normal|complex.

    Do not implement â€” only plan.

    After all subtasks complete, synthesize a final unified answer.'
  model: minimax-m2.1
  fallback_models:
  - deepseek-v3.2
  - qwen3-235b-thinking
  skills:
  - _base
  - planning
  memory:
    short_term_turns: 20
    long_term: true
    recall_top_k: 3
    episodic_recall_budget: 1500
    kb_recall_budget: 800
  autonomy_level: 1
  llm:
    provider: flock
    api_key_env: FLOCK_API_KEY
    base_url_env: PLANNER_BASE_URL
- id: executor
  role: 'Implementation agent. Carry out tasks assigned by the planner.

    Write clean, working code or content. Always include reasoning.'
  model: minimax-m2.1
  fallback_models:
  - deepseek-v3.2
  - qwen3-235b-thinking
  skills:
  - _base
  - coding
  memory:
    short_term_turns: 20
    long_term: true
    recall_top_k: 3
    episodic_recall_budget: 2000
    kb_recall_budget: 800
  autonomy_level: 1
  llm:
    provider: flock
    api_key_env: EXECUTOR_API_KEY
    base_url_env: EXECUTOR_BASE_URL
- id: reviewer
  role: 'Quality advisor. Review task outputs and provide structured feedback.

    If output is ready to ship: {"passed": true, "comment": "..."}

    If needs revision: {"passed": false, "suggestions": ["specific fix 1", "specific fix 2"], "comment": "..."}

    Be specific with actionable fix recommendations. Max 3 suggestions.'
  model: deepseek-v3.2
  fallback_models:
  - minimax-m2.1
  - qwen3-235b-thinking
  skills:
  - _base
  - review
  memory:
    short_term_turns: 20
    long_term: true
    recall_top_k: 3
    episodic_recall_budget: 1000
    kb_recall_budget: 1000
  autonomy_level: 1
  llm:
    provider: flock
    api_key_env: REVIEWER_API_KEY
    base_url_env: REVIEWER_BASE_URL
